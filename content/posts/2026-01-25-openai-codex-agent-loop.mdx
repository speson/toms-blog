---
title: "OpenAI Codex 에이전트 루프 해부: 기술적 딥다이브"
description: "OpenAI가 Codex CLI의 에이전트 루프 작동 방식을 상세히 공개했습니다. 프롬프트 구성, 모델 추론, 도구 호출, 그리고 성능 최적화에 대해 알아봅니다."
date: "2026-01-25"
tags: ["AI", "OpenAI", "Codex", "에이전트"]
source: "openai"
sourceUrl: "https://openai.com/index/unrolling-the-codex-agent-loop"
category: "ai-news"
draft: false
---

안녕하세요, Tom입니다.

OpenAI가 **Codex CLI**의 핵심인 **에이전트 루프**에 대한 기술적 딥다이브를 공개했습니다. 에이전트 루프가 뭔지 궁금하셨죠? 사용자, 모델, 그리고 도구 간의 상호작용을 조율하는 핵심 로직입니다.

## 에이전트 루프의 기본 구조

```
사용자 입력 → 프롬프트 구성 → 모델 추론 → 도구 호출 → 결과 반영 → (반복)
```

💡 **쉽게 말하면:** 사용자가 명령을 내리면, Codex가 생각하고 → 도구를 쓰고 → 결과를 보고 → 다시 생각하는 과정을 반복합니다.

### 1. 사용자 입력

에이전트는 사용자의 입력을 받아 **프롬프트**에 포함시킵니다.

### 2. 모델 추론 (Inference)

프롬프트가 **토큰**으로 변환되고, 모델이 출력 토큰을 생성합니다. 출력은 다시 텍스트로 변환됩니다.

🎯 **여기서 중요한 점:** 토큰 수가 많아질수록 비용도 늘어납니다. Codex는 효율적인 토큰 사용을 위해 여러 최적화를 합니다.

### 3. 도구 호출 또는 응답

모델은 두 가지 중 하나를 수행합니다:

- **최종 응답**: 사용자에게 메시지 반환
- **도구 호출**: 에이전트가 실행할 작업 요청 (예: `ls` 실행)

⚠️ **도구 호출 시:** 결과가 프롬프트에 추가되고 모델을 다시 쿼리합니다. 이게 반복되면 토큰 비용이 늘어나죠.

## Responses API를 통한 구현

Codex CLI는 **Responses API**를 사용하여 모델 추론을 수행합니다.

### 주요 파라미터

| 파라미터       | 설명                            |
| -------------- | ------------------------------- |
| `instructions` | 시스템/개발자 메시지            |
| `tools`        | 모델이 호출할 수 있는 도구 목록 |
| `input`        | 텍스트, 이미지, 파일 입력 목록  |

## 제가 배운 점

**1. 토큰 최적화가 핵심**

Codex는 불필요한 토큰 사용을 줄이기 위해 여러 기법을 씁니다. 예를 들어, 이전 대화 중 불필요한 부분은 요약해서 넣습니다.

**2. 도구 선택이 중요**

너무 많은 도구를 주면 모델이 헷갈려합니다. Codex는 핵심 도구만 제공해서 정확도를 높입니다.

**3. 루프 탈출 조건**

무한 루프에 빠지지 않도록, 최대 반복 횟수나 종료 조건을 명확히 설정해야 합니다.

## 마무리

Codex의 에이전트 루프는 **"생각 → 행동 → 관찰 → 반복"**의 단순한 구조입니다. 하지만 이 단순함 속에 토큰 최적화, 도구 선택, 오류 처리 등 많은 세부사항이 숨어있습니다.

우리도 AI 에이전트를 만들 때 이 구조를 참고할 수 있을 것 같아요.

---

**원문**: [OpenAI - Unrolling the Codex Agent Loop](https://openai.com/index/unrolling-the-codex-agent-loop)
